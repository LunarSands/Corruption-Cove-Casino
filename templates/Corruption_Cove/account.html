{% extends 'Corruption_Cove/base.html' %}
{% load static %}

{% block title_block %}
Account
{% endblock %}
{% if request.user.profile.banner.url %}
    <img class="banner" src ="{{ request.user.profile.banner.url }}" >
{% endif %}

{% block body_block %}
<link rel="stylesheet" type="text/css" href= "{% static 'account.css' %}">

<img class="banner" src ="{{ request.user.profile.banner.url }}" >
<div class="profile">
    <img class="pfp" src="{{ request.user.profile.pfp.url }}">
    <p class="welcome">{{ request.user.profile.name }}<br>
    Top Bets:<br>
    {% if topbets %}
    {% for bet in topbets %}
    {{bet.game}}: {{bet.amount}}<br>
    {% endfor %}
    {% endif %}

    Recent Bets:<br>
    {% if recentbets %}
    {% for bet in recentbets %}
    {{bet.game}}: {{bet.amount}}<br>
    {% endfor %}
    {% endif %}
    </p><br>
    <a class="logout" href="{% url 'corruption-cove-casino:logout' %}">Logout</a><br>
</div>

<div class="bank">
    <h1 class="welcome">Current Balance:</h1><br>
    <p class="welcome">{{ balance }}<br>
    {% if balance < 0 %}
    You are in debt, you can keep playing, but your debt will grow.
    We reccommend requesting money from a friend, or depositing more.
    {% endif %}
    
    </p>
</div>

<div class="requests">
    <h1 class="welcome">Requests:</h1><br><br>
    <p class="welcome">
        {% if requests %}
        {% for x in requests %}
        {{ x.name }}:<br>
        {{ x.amount }} {{ request.user.profile.currency }}<br>
        accept/decline buttons. both delete request, accept transfers money.
        {% endfor %}
        {% endif %}
    </p>
</div>

<div class="friends">
    <h1 class="welcome">Friends:</h1><br><br>
    {% if friends %}
    {% for friend in friends %}
    <a class="logout" href="{% url 'corruption-cove-casino:account' user_slug=friend.slug %}">{{ friend.name }}</a>
    {% endfor %}
    {% endif %}
</div>
{% endblock %}